/* =========================================================
   RobotVacuumLab — Editorial Tech Lab CSS (UPDATED)
   Goals: clean, trustworthy, fast, accessible, mobile-first
   ========================================================= */

/* ---------- Design Tokens ---------- */
:root{
  /* Typography */
  --font-sans: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
  --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

  /* Type scale */
  --text-xs: 0.8125rem;  /* 13px */
  --text-sm: 0.9375rem;  /* 15px */
  --text-base: 1.0625rem;/* 17px */
  --text-md: 1.125rem;   /* 18px */
  --text-lg: 1.25rem;    /* 20px */
  --text-xl: 1.5rem;     /* 24px */
  --text-2xl: 1.875rem;  /* 30px */
  --text-3xl: 2.25rem;   /* 36px */
  --text-4xl: 2.75rem;   /* 44px */

  --lh-tight: 1.15;
  --lh-normal: 1.55;
  --lh-loose: 1.75;

  /* Layout */
  --container: 72rem; /* 1152px */
  --gutter: clamp(1rem, 3vw, 1.5rem);
  --radius-sm: 0.75rem;
  --radius-md: 1rem;
  --radius-lg: 1.25rem;

  /* Colors (light-first) */
  --bg: #ffffff;
  --surface: #fbfcfd;
  --surface-2: #f4f6f8;
  --border: #e3e7ec;

  --text: #0c1220;
  --muted: #4b5565;
  --muted-2: #6b7280;

  /* Accent (subtle “lab green”) */
  --accent: #0ea37f;
  --accent-2: #0b7a60;
  --accent-soft: rgba(14,163,127,.12);

  /* Attention */
  --warn: #b45309;
  --warn-soft: rgba(180,83,9,.12);

  /* Success / Danger */
  --ok: #15803d;
  --ok-soft: rgba(21,128,61,.12);
  --bad: #b91c1c;
  --bad-soft: rgba(185,28,28,.10);

  /* Shadow (soft only) */
  --shadow: 0 10px 22px rgba(12,18,32,.06);
  --shadow-sm: 0 6px 14px rgba(12,18,32,.05);

  /* Focus */
  --focus: 0 0 0 3px rgba(14,163,127,.22);

  /* Transitions */
  --t: 160ms ease;

  /* Hairline gradient */
  --hairline: linear-gradient(90deg, rgba(14,163,127,.35), rgba(14,163,127,0));
}

/* Auto dark-mode (matches your <meta color-scheme="light dark">) */
@media (prefers-color-scheme: dark){
  :root{
    --bg: #0b0f17;
    --surface: #0f1624;
    --surface-2: #121b2c;
    --border: rgba(255,255,255,.10);

    --text: #eef2f7;
    --muted: #b6c0cf;
    --muted-2: #9aa6b6;

    --accent: #21d6a6;
    --accent-2: #12b68a;
    --accent-soft: rgba(33,214,166,.12);

    --shadow: 0 14px 28px rgba(0,0,0,.35);
    --shadow-sm: 0 10px 18px rgba(0,0,0,.25);
    --focus: 0 0 0 3px rgba(33,214,166,.22);

    --hairline: linear-gradient(90deg, rgba(33,214,166,.35), rgba(33,214,166,0));
  }
}

/* ---------- Base / Reset ---------- */
*,
*::before,
*::after{ box-sizing: border-box; }

html{ -webkit-text-size-adjust: 100%; text-size-adjust: 100%; }

body{
  margin: 0;
  font-family: var(--font-sans);
  font-size: var(--text-base);
  line-height: var(--lh-normal);
  color: var(--text);
  background: var(--bg);
}

img, picture, video, canvas, svg{
  display: block;
  max-width: 100%;
}

input, button, textarea, select{
  font: inherit;
  color: inherit;
}

a{ color: inherit; text-decoration: none; }
a:hover{ text-decoration: underline; text-decoration-thickness: 2px; text-underline-offset: 3px; }

:focus-visible{
  outline: none;
  box-shadow: var(--focus);
  border-radius: 0.5rem;
}

::selection{
  background: rgba(14,163,127,.18);
}

/* Reduce motion */
@media (prefers-reduced-motion: reduce){
  *{ animation-duration: 1ms !important; animation-iteration-count: 1 !important; transition-duration: 1ms !important; scroll-behavior: auto !important; }
}

/* ---------- Utilities ---------- */
.container{
  width: min(100% - (var(--gutter) * 2), var(--container));
  margin-inline: auto;
}

.stack > * + *{ margin-top: 1rem; }
.stack-sm > * + *{ margin-top: 0.75rem; }
.stack-lg > * + *{ margin-top: 1.5rem; }

.grid{
  display: grid;
  gap: 1rem;
}

@media (min-width: 48rem){
  .grid{ gap: 1.15rem; }
  .grid.cols-2{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
  .grid.cols-3{ grid-template-columns: repeat(3, minmax(0, 1fr)); }
  .grid.cols-4{ grid-template-columns: repeat(4, minmax(0, 1fr)); }
}

.muted{ color: var(--muted); }
.small{ font-size: var(--text-sm); }
.tiny{ font-size: var(--text-xs); }
.mono{ font-family: var(--font-mono); }
.nowrap{ white-space: nowrap; }
.hidden{ display: none !important; }

.hr{
  height: 1px;
  background: var(--border);
  border: 0;
  margin: 1.75rem 0;
}

/* ---------- Skip link ---------- */
.skip-link{
  position: absolute;
  left: 1rem;
  top: 1rem;
  padding: 0.75rem 1rem;
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 0.75rem;
  box-shadow: var(--shadow-sm);
  transform: translateY(-140%);
  transition: transform var(--t);
  z-index: 9999;
}
.skip-link:focus{ transform: translateY(0); }

/* ---------- Header / Nav ---------- */
.site-header{
  position: sticky;
  top: 0;
  z-index: 50;
  background: color-mix(in srgb, var(--bg) 92%, transparent);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid var(--border);
}

@supports not (color: color-mix(in srgb, #000 50%, #fff)){
  .site-header{ background: var(--bg); }
}

.header-inner{
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.85rem 0;
  gap: 1rem;
}

.brand{
  display: flex;
  align-items: center;
  gap: 0.85rem;
  min-width: 0;
}

.brand-mark{
  width: 48px;
  height: 48px;
  border-radius: 1.05rem;
  background: var(--surface-2);
  border: 1px solid var(--border);
  display: grid;
  place-items: center;
  flex: 0 0 auto;
}

.brand-mark img{
  width: 36px;
  height: 36px;
  object-fit: contain;
  display: block;
}

@media (prefers-color-scheme: dark){
  .site-header .brand-mark img{
    filter: brightness(0) invert(1) contrast(1.15)
            drop-shadow(0 1px 1px rgba(0,0,0,.65));
  }
}

.brand-title{
  font-weight: 800;
  letter-spacing: -0.02em;
  line-height: 1.1;
  font-size: 1.12rem;
}
.brand-sub{
  font-size: 0.85rem;
  color: var(--muted);
  line-height: 1.1;
}

.nav{
  display: none;
  gap: 0.5rem;
  align-items: center;
}
@media (min-width: 48rem){
  .nav{ display: flex; }
}
.nav a{
  padding: 0.55rem 0.75rem;
  border-radius: 0.8rem;
  color: var(--muted);
  text-decoration: none;
  transition: background var(--t), color var(--t), border-color var(--t);
  border: 1px solid transparent;
}
.nav a:hover{
  background: var(--surface-2);
  color: var(--text);
  text-decoration: none;
  border-color: var(--border);
}
.nav a[aria-current="page"]{
  color: var(--text);
  background: var(--accent-soft);
  border: 1px solid color-mix(in srgb, var(--accent) 22%, var(--border));
}

.nav-cta{ display: none; }
@media (min-width: 48rem){
  .nav-cta{ display: inline-flex; }
}

/* Mobile menu */
.menu-btn{
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.55rem 0.75rem;
  border: 1px solid var(--border);
  background: var(--surface);
  border-radius: 0.9rem;
  cursor: pointer;
  transition: background var(--t), transform var(--t);
}
.menu-btn:hover{ background: var(--surface-2); }
.menu-btn:active{ transform: translateY(1px); }
@media (min-width: 48rem){
  .menu-btn{ display: none; }
}

.mobile-nav{
  display: none;
  padding: 0.75rem 0 1rem;
}
.mobile-nav.open{ display: block; }
.mobile-nav a{
  display: block;
  padding: 0.75rem 0.85rem;
  border: 1px solid var(--border);
  background: var(--surface);
  border-radius: 0.95rem;
  text-decoration: none;
  margin-top: 0.55rem;
  color: var(--muted);
}
.mobile-nav a:hover{
  background: var(--surface-2);
  color: var(--text);
}

/* ---------- Breadcrumbs ---------- */
.breadcrumbs{
  padding: 0.9rem 0 0;
  color: var(--muted);
  font-size: var(--text-sm);
}
.breadcrumbs ol{
  display: flex;
  gap: 0.5rem;
  padding: 0;
  margin: 0;
  list-style: none;
  flex-wrap: wrap;
}
.breadcrumbs a{
  color: var(--muted);
  text-decoration: none;
}
.breadcrumbs a:hover{ color: var(--text); text-decoration: underline; }
.breadcrumbs .sep{ color: var(--muted-2); }

/* ---------- Hero ---------- */
.hero{
  padding: clamp(1.25rem, 3vw, 2rem) 0 1.25rem;
}
.hero-card{
  border: 1px solid var(--border);
  background: linear-gradient(180deg, var(--surface), var(--bg));
  border-radius: var(--radius-lg);
  overflow: hidden;
  box-shadow: var(--shadow-sm);
}

.hero-media{
  position: relative;
  aspect-ratio: 16 / 9;
  background: var(--surface-2);
}
.hero-media img{
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.hero-body{
  padding: clamp(1rem, 2.6vw, 1.5rem);
}

.kicker{
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  font-size: var(--text-xs);
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: var(--muted);
}
.kicker::before{
  content:"";
  width: 18px;
  height: 1px;
  background: var(--hairline);
}

.h1{
  margin: 0.5rem 0 0;
  font-weight: 850;
  letter-spacing: -0.03em;
  line-height: var(--lh-tight);
  font-size: clamp(1.75rem, 3.3vw, 2.75rem);
}

.lede{
  margin: 0.75rem 0 0;
  font-size: clamp(1rem, 1.2vw, 1.15rem);
  color: var(--muted);
  line-height: var(--lh-loose);
  max-width: 65ch;
}

.hero-actions{
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
  margin-top: 1rem;
}

/* ---------- Buttons ---------- */
.btn{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.55rem;
  padding: 0.75rem 1rem;
  border-radius: 0.95rem;
  border: 1px solid color-mix(in srgb, var(--accent) 30%, var(--border));
  background: var(--accent);
  color: #fff;
  font-weight: 800;
  text-decoration: none;
  transition: transform var(--t), background var(--t), border-color var(--t);
}
.btn:hover{
  background: var(--accent-2);
  text-decoration: none;
}
.btn:active{ transform: translateY(1px); }

.btn-secondary{
  background: var(--surface);
  color: var(--text);
  border: 1px solid var(--border);
}
.btn-secondary:hover{ background: var(--surface-2); }

.btn-ghost{
  background: transparent;
  border: 1px dashed var(--border);
  color: var(--muted);
}
.btn-ghost:hover{
  background: var(--surface-2);
  color: var(--text);
  text-decoration: none;
}

/* ---------- Main content ---------- */
main{
  padding: 1.25rem 0 3rem;
}

.section{
  margin-top: 2rem;
}

.section-title{
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 1rem;
  margin-bottom: 0.9rem;
}
.section-title h2{
  margin: 0;
  font-size: clamp(1.25rem, 2.2vw, 1.6rem);
  letter-spacing: -0.02em;
}
.section-title .hint{
  color: var(--muted);
  font-size: var(--text-sm);
}

/* ---------- Cards ---------- */
.card{
  border: 1px solid var(--border);
  background: var(--surface);
  border-radius: var(--radius-md);
  overflow: hidden;
  transition: transform var(--t), background var(--t), border-color var(--t);
}
.card:hover{
  background: var(--bg);
  border-color: color-mix(in srgb, var(--accent) 18%, var(--border));
  transform: translateY(-1px);
}
.card .card-body{
  padding: 1rem;
}
.card h3{
  margin: 0 0 0.35rem;
  font-size: 1.1rem;
  letter-spacing: -0.01em;
}
.card p{
  margin: 0.25rem 0 0;
  color: var(--muted);
  font-size: var(--text-sm);
  line-height: 1.6;
}
.card .meta{
  margin-top: 0.75rem;
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

/* “Top pick” / highlight card */
.card.pick{
  border-color: color-mix(in srgb, var(--accent) 26%, var(--border));
  background: linear-gradient(180deg, var(--accent-soft), var(--surface));
}

.badge{
  display: inline-flex;
  align-items: center;
  gap: 0.4rem;
  padding: 0.35rem 0.6rem;
  border-radius: 999px;
  font-size: var(--text-xs);
  font-weight: 800;
  border: 1px solid var(--border);
  background: var(--surface-2);
  color: var(--muted);
}
.badge.accent{
  background: var(--accent-soft);
  border-color: color-mix(in srgb, var(--accent) 25%, var(--border));
  color: color-mix(in srgb, var(--accent) 70%, var(--text));
}
.tag{
  display: inline-flex;
  align-items: center;
  padding: 0.3rem 0.55rem;
  border-radius: 0.75rem;
  font-size: var(--text-xs);
  border: 1px solid var(--border);
  background: var(--bg);
  color: var(--muted);
}

/* ---------- Tables ---------- */
.table-wrap{
  overflow: auto;
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  background: var(--bg);
}

.table{
  width: 100%;
  min-width: 720px;
  border-collapse: separate;
  border-spacing: 0;
}

.table th,
.table td{
  padding: 0.85rem 0.85rem;
  border-bottom: 1px solid var(--border);
  vertical-align: top;
}

.table th{
  text-align: left;
  font-size: var(--text-xs);
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: var(--muted);
  background: var(--surface-2);
}

.table tr:last-child td{ border-bottom: 0; }

/* ---------- Callouts / Notes ---------- */
.note{
  border: 1px solid var(--border);
  background: var(--surface);
  border-radius: var(--radius-md);
  padding: 1rem;
}
.note.accent{
  border-color: color-mix(in srgb, var(--accent) 22%, var(--border));
  background: linear-gradient(180deg, var(--accent-soft), var(--surface));
}
.note.warn{
  border-color: color-mix(in srgb, var(--warn) 28%, var(--border));
  background: linear-gradient(180deg, var(--warn-soft), var(--surface));
}
.note h3{
  margin: 0 0 0.4rem;
  font-size: 1.05rem;
}
.note p{ margin: 0.25rem 0 0; color: var(--muted); }

/* ---------- Pros / Cons ---------- */
.pros-cons{
  display: grid;
  gap: 1rem;
}
@media (min-width: 48rem){
  .pros-cons{ grid-template-columns: 1fr 1fr; }
}
.pros, .cons{
  border: 1px solid var(--border);
  background: var(--surface);
  border-radius: var(--radius-md);
  padding: 1rem;
}
.pros{
  border-color: color-mix(in srgb, var(--ok) 25%, var(--border));
  background: linear-gradient(180deg, var(--ok-soft), var(--surface));
}
.cons{
  border-color: color-mix(in srgb, var(--bad) 22%, var(--border));
  background: linear-gradient(180deg, var(--bad-soft), var(--surface));
}
.pros h3, .cons h3{
  margin: 0 0 0.5rem;
  font-size: 1.05rem;
}
.pros ul, .cons ul{
  margin: 0;
  padding-left: 1.1rem;
  color: var(--muted);
}
.pros li + li, .cons li + li{ margin-top: 0.35rem; }

/* ---------- FAQ (details/summary) ---------- */
.faq{
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  overflow: hidden;
  background: var(--bg);
}
.faq details{
  border-top: 1px solid var(--border);
}
.faq details:first-child{ border-top: 0; }

.faq summary{
  cursor: pointer;
  list-style: none;
  padding: 1rem;
  font-weight: 800;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1rem;
}
.faq summary::-webkit-details-marker{ display: none; }

.faq summary::after{
  content: "+";
  width: 32px;
  height: 32px;
  border-radius: 0.9rem;
  display: grid;
  place-items: center;
  border: 1px solid var(--border);
  background: var(--surface-2);
  color: var(--muted);
  transition: transform var(--t), background var(--t), color var(--t);
}
.faq details[open] summary::after{
  content: "−";
  background: var(--accent-soft);
  color: color-mix(in srgb, var(--accent) 70%, var(--text));
}

.faq .answer{
  padding: 0 1rem 1rem;
  color: var(--muted);
  line-height: var(--lh-loose);
}

/* ---------- Article typography ---------- */
.article{
  max-width: 75ch;
}
.article h1{ margin: 0.5rem 0 0; }
.article h2, .article h3{
  margin-top: 1.6rem;
  margin-bottom: 0.6rem;
  letter-spacing: -0.02em;
  line-height: 1.25;
}
.article p{ margin: 0.85rem 0; color: var(--text); }
.article p.muted{ color: var(--muted); }
.article ul, .article ol{
  margin: 0.85rem 0;
  padding-left: 1.25rem;
}
.article li + li{ margin-top: 0.4rem; }
.article blockquote{
  margin: 1rem 0;
  padding: 0.85rem 1rem;
  border-left: 3px solid color-mix(in srgb, var(--accent) 45%, var(--border));
  background: var(--surface-2);
  border-radius: 0.75rem;
  color: var(--muted);
}

/* ---------- Cookie Banner (Consent) ---------- */
.cookie-banner{
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 9998;

  /* safe-area for iOS notch/home bar */
  padding-bottom: env(safe-area-inset-bottom, 0px);

  /* Use your note styling but with stronger “panel” behavior */
  border-top: 1px solid var(--border);
  background: color-mix(in srgb, var(--bg) 92%, transparent);
  backdrop-filter: blur(10px);
  box-shadow: 0 -10px 22px rgba(12,18,32,.08);

  /* Subtle entrance */
  transform: translateY(110%);
  opacity: 0;
  transition: transform var(--t), opacity var(--t);
}

/* When JS removes [hidden] and toggles a class, show it nicely */
.cookie-banner:not([hidden]){
  display: block;
}
.cookie-banner.is-open{
  transform: translateY(0);
  opacity: 1;
}

/* Inner layout */
.cookie-banner__inner{
  display: flex;
  flex-direction: column;
  gap: 0.85rem;
  padding: 0.9rem 0;
}

@media (min-width: 48rem){
  .cookie-banner__inner{
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
    gap: 1rem;
  }
}

.cookie-banner__text{
  display: grid;
  gap: 0.25rem;
  min-width: 0;
}

.cookie-banner__text strong{
  font-size: var(--text-sm);
  letter-spacing: -0.01em;
}

.cookie-banner__text .muted{
  font-size: var(--text-sm);
  line-height: 1.55;
}

/* Actions */
.cookie-banner__actions{
  display: flex;
  gap: 0.65rem;
  flex-wrap: wrap;
}

/* Make buttons slightly smaller inside the banner */
.cookie-banner .btn{
  padding: 0.6rem 0.85rem;
  border-radius: 0.9rem;
}

/* “Reject” should look calm but clear */
.cookie-banner [data-consent-reject].btn-secondary{
  border-color: color-mix(in srgb, var(--border) 70%, var(--warn) 30%);
}
.cookie-banner [data-consent-reject].btn-secondary:hover{
  background: color-mix(in srgb, var(--warn-soft) 60%, var(--surface));
}

/* Optional: small “close” button if you add it later */
.cookie-banner [data-consent-close]{
  background: transparent;
  border: 1px solid var(--border);
  color: var(--muted);
}

/* If color-mix unsupported, keep it readable */
@supports not (color: color-mix(in srgb, #000 50%, #fff)){
  .cookie-banner{
    background: var(--bg);
  }
}

/* ---------- Footer ---------- */
.site-footer{
  border-top: 1px solid var(--border);
  padding: 2rem 0;
  background: var(--surface);
}

.footer-logo{
  display: block;
  height: 44px;
  width: auto;
  margin-bottom: 0.75rem;
  opacity: .95;
}

.footer-inner{
  display: grid;
  gap: 1rem;
}
@media (min-width: 48rem){
  .footer-inner{
    grid-template-columns: 1.5fr 1fr;
    align-items: start;
  }
}
.footer-nav{
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}
.footer-nav a{
  padding: 0.45rem 0.65rem;
  border-radius: 0.75rem;
  border: 1px solid var(--border);
  background: var(--bg);
  color: var(--muted);
  text-decoration: none;
}
.footer-nav a:hover{
  background: var(--surface-2);
  color: var(--text);
}
.footer-note{
  color: var(--muted);
  font-size: var(--text-sm);
  line-height: 1.6;
}

/* ---------- Print ---------- */
@media print{
  .site-header, .nav, .mobile-nav, .menu-btn, .hero-actions, .footer-nav, .cookie-banner { display: none !important; }
  body{ background: #fff; color: #000; }
  a{ text-decoration: underline; }
}

/* ---------- Small helpers you’ll reuse ---------- */
.last-updated{
  margin-top: 0.75rem;
  font-size: var(--text-xs);
  color: var(--muted-2);
}
.kpi{
  display: flex;
  gap: 0.75rem;
  flex-wrap: wrap;
  margin-top: 0.85rem;
}
.kpi .item{
  padding: 0.55rem 0.75rem;
  border: 1px solid var(--border);
  background: var(--surface);
  border-radius: 0.9rem;
  font-size: var(--text-sm);
  color: var(--muted);
}
